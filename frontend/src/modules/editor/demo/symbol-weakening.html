<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Markdown 符号弱化的设计意义</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      padding: 40px;
      background: #f5f5f5;
      max-width: 1200px;
      margin: 0 auto;
    }

    .demo-box {
      background: white;
      padding: 30px;
      margin-bottom: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    h2 {
      margin-top: 0;
      color: #2563eb;
    }

    code {
      background: #1f2937;
      color: #10b981;
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 14px;
    }

    /* 三种编辑器模式对比 */
    .editor-comparison {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin: 30px 0;
    }

    .editor-mode {
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      overflow: hidden;
    }

    .editor-header {
      background: #f3f4f6;
      padding: 10px 15px;
      font-weight: 600;
      font-size: 14px;
      border-bottom: 2px solid #e5e7eb;
    }

    .editor-content {
      padding: 20px;
      background: white;
      min-height: 200px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    /* 模式1：纯源码模式 */
    .mode-source {
      font-family: 'Courier New', monospace;
      font-size: 14px;
      color: #374151;
      line-height: 1.8;
    }

    /* 模式2：完全渲染模式（符号隐藏） */
    .mode-rendered h1 {
      font-size: 32px;
      font-weight: 700;
      margin: 20px 0;
      color: #111827;
    }

    .mode-rendered h2 {
      font-size: 24px;
      font-weight: 600;
      margin: 16px 0;
      color: #111827;
    }

    .mode-rendered p {
      margin: 12px 0;
      color: #1f2937;
    }

    /* 模式3：Obsidian 风格（符号弱化） */
    .mode-obsidian h1,
    .mode-obsidian h2 {
      font-weight: 600;
      margin: 16px 0;
    }

    .mode-obsidian h1 {
      font-size: 32px;
    }

    .mode-obsidian h2 {
      font-size: 24px;
    }

    .mode-obsidian .heading-token {
      color: #9ca3af;  /* 灰色 - 弱化符号 */
      font-weight: 400;
    }

    .mode-obsidian .heading-text {
      color: #111827;  /* 深色 - 正常文字 */
    }

    .mode-obsidian p {
      margin: 12px 0;
      color: #1f2937;
    }

    /* 优缺点对比卡片 */
    .pros-cons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin: 20px 0;
    }

    .pro-card, .con-card {
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid;
    }

    .pro-card {
      background: #d1fae5;
      border-color: #10b981;
    }

    .con-card {
      background: #fecaca;
      border-color: #ef4444;
    }

    .pro-card h4, .con-card h4 {
      margin: 0 0 10px 0;
      font-size: 16px;
    }

    .pro-card ul, .con-card ul {
      margin: 0;
      padding-left: 20px;
    }

    .info-box {
      background: #dbeafe;
      border-left: 4px solid #2563eb;
      padding: 15px;
      margin: 20px 0;
    }

    .highlight-box {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 25px;
      border-radius: 8px;
      margin: 30px 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }

    th, td {
      border: 1px solid #e5e7eb;
      padding: 12px;
      text-align: left;
    }

    th {
      background: #f3f4f6;
      font-weight: 600;
    }

    .best {
      background: #d1fae5 !important;
      font-weight: 600;
    }
  </style>
</head>
<body>

  <div class="demo-box">
    <h2>🎯 核心问题</h2>
    <p style="font-size: 18px;">
      为什么要"弱化"Markdown 符号（<code>##</code>），而不是完全隐藏或完全保留？
    </p>
  </div>

  <!-- 三种编辑器模式对比 -->
  <div class="demo-box">
    <h2>对比：三种编辑器模式</h2>
    
    <div class="editor-comparison">
      <!-- 模式1：纯源码 -->
      <div class="editor-mode">
        <div class="editor-header">模式1：纯源码（传统 Markdown 编辑器）</div>
        <div class="editor-content mode-source">
# 这是一级标题<br><br>
这是一段正文内容。<br><br>
## 这是二级标题<br><br>
继续写正文。<br><br>
### 三级标题
        </div>
      </div>

      <!-- 模式2：完全渲染 -->
      <div class="editor-mode">
        <div class="editor-header">模式2：完全渲染（符号完全隐藏）</div>
        <div class="editor-content mode-rendered">
          <h1>这是一级标题</h1>
          <p>这是一段正文内容。</p>
          <h2>这是二级标题</h2>
          <p>继续写正文。</p>
          <h2>三级标题</h2>
        </div>
      </div>

      <!-- 模式3：Obsidian 风格 -->
      <div class="editor-mode" style="border-color: #10b981; border-width: 3px;">
        <div class="editor-header" style="background: #d1fae5; color: #047857;">
          ⭐ 模式3：Obsidian 风格（符号弱化）
        </div>
        <div class="editor-content mode-obsidian">
          <h1>
            <span class="heading-token"># </span>
            <span class="heading-text">这是一级标题</span>
          </h1>
          <p>这是一段正文内容。</p>
          <h2>
            <span class="heading-token">## </span>
            <span class="heading-text">这是二级标题</span>
          </h2>
          <p>继续写正文。</p>
          <h2>
            <span class="heading-token">### </span>
            <span class="heading-text">三级标题</span>
          </h2>
        </div>
      </div>
    </div>

    <div class="info-box">
      <strong>👀 仔细观察：</strong>
      <ul>
        <li><strong>模式1</strong>：看到原始代码，但干扰阅读体验</li>
        <li><strong>模式2</strong>：阅读体验好，但不知道是几级标题（# 还是 ##？）</li>
        <li><strong>模式3</strong>：符号变灰，既不干扰阅读，又保留了 Markdown 语法信息 ✅</li>
      </ul>
    </div>
  </div>

  <!-- 符号弱化的优势 -->
  <div class="demo-box">
    <h2>为什么选择"符号弱化"？</h2>

    <div class="highlight-box">
      <h3 style="margin-top: 0; color: white;">🌟 设计哲学：所见即所想（WYSIWYG）+ 所见即所得（WYSIWYM）</h3>
      <p style="font-size: 16px; line-height: 1.8;">
        Obsidian 风格的 Live Preview 试图在"纯源码编辑"和"完全渲染预览"之间找到最佳平衡点：
      </p>
      <ul style="font-size: 16px; line-height: 1.8;">
        <li><strong>保留语法</strong>：你能看到 Markdown 符号，知道自己在写什么结构</li>
        <li><strong>弱化干扰</strong>：符号变灰，不会抢夺注意力</li>
        <li><strong>视觉优先</strong>：内容以渲染后的样式显示，阅读更舒适</li>
      </ul>
    </div>

    <table>
      <tr>
        <th>特性</th>
        <th>纯源码模式</th>
        <th>完全渲染模式</th>
        <th class="best">符号弱化模式 ⭐</th>
      </tr>
      <tr>
        <td><strong>阅读体验</strong></td>
        <td>❌ 差（符号干扰）</td>
        <td>✅ 好（无符号）</td>
        <td>✅ 好（符号弱化）</td>
      </tr>
      <tr>
        <td><strong>语法可见性</strong></td>
        <td>✅ 完全可见</td>
        <td>❌ 完全隐藏</td>
        <td>✅ 弱化可见</td>
      </tr>
      <tr>
        <td><strong>编辑便利性</strong></td>
        <td>✅ 容易定位</td>
        <td>❌ 不知道结构</td>
        <td>✅ 一目了然</td>
      </tr>
      <tr>
        <td><strong>学习曲线</strong></td>
        <td>⚠️ 需要熟悉语法</td>
        <td>⚠️ 不知道底层</td>
        <td>✅ 自然学习</td>
      </tr>
      <tr>
        <td><strong>专注度</strong></td>
        <td>❌ 符号分散注意力</td>
        <td>✅ 专注内容</td>
        <td>✅ 专注内容</td>
      </tr>
    </table>
  </div>

  <!-- 实际应用场景 -->
  <div class="demo-box">
    <h2>实际应用场景</h2>

    <h3>场景1：快速识别标题层级</h3>
    <div style="background: #f9fafb; padding: 20px; border-radius: 8px; margin: 15px 0;">
      <div class="mode-obsidian">
        <h1>
          <span class="heading-token"># </span>
          <span class="heading-text">文章标题</span>
        </h1>
        <h2>
          <span class="heading-token">## </span>
          <span class="heading-text">主要章节</span>
        </h2>
        <h2>
          <span class="heading-token">### </span>
          <span class="heading-text">子章节</span>
        </h2>
      </div>
      <p style="font-size: 14px; color: #6b7280; margin-top: 15px;">
        💡 即使符号是灰色的，你仍然能一眼看出：第一个是 H1（一个#），第二个是 H2（两个#），第三个是 H3（三个#）
      </p>
    </div>

    <h3>场景2：编辑时的上下文感知</h3>
    <div style="background: #f9fafb; padding: 20px; border-radius: 8px; margin: 15px 0;">
      <p><strong>问题：</strong>如果符号完全隐藏，当你在编辑时：</p>
      <ul>
        <li>不知道这是 H2 还是 H3</li>
        <li>想要修改标题层级时，需要切换到源码模式</li>
        <li>复制粘贴时，可能不清楚层级结构</li>
      </ul>
      <p><strong>解决：</strong>符号弱化后，你始终能看到结构！</p>
    </div>

    <h3>场景3：新手学习 Markdown</h3>
    <div style="background: #f9fafb; padding: 20px; border-radius: 8px; margin: 15px 0;">
      <p>对于 Markdown 新手：</p>
      <div class="pros-cons">
        <div class="pro-card">
          <h4>✅ 符号弱化的好处</h4>
          <ul>
            <li>看到符号，自然学习语法</li>
            <li>理解 Markdown 结构</li>
            <li>不需要频繁切换预览</li>
          </ul>
        </div>
        <div class="con-card">
          <h4>❌ 完全隐藏的问题</h4>
          <ul>
            <li>不知道底层是什么</li>
            <li>"魔法"般的转换</li>
            <li>无法学习语法</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- 视觉对比 -->
  <div class="demo-box">
    <h2>视觉注意力对比</h2>
    <p>符号颜色对视觉注意力的影响：</p>

    <div style="margin: 30px 0;">
      <h3>A. 符号深色（干扰阅读）</h3>
      <div style="background: white; padding: 20px; border: 2px solid #e5e7eb; border-radius: 8px;">
        <h2 style="font-size: 24px; margin: 0;">
          <span style="color: #111827; font-weight: 600;">## </span>
          <span style="color: #111827; font-weight: 600;">深度学习入门指南</span>
        </h2>
        <p style="margin: 10px 0 0 0;">本章将介绍深度学习的基本概念...</p>
      </div>
      <p style="font-size: 14px; color: #ef4444;">❌ 你的目光会先被 <code>##</code> 吸引，干扰了对内容的关注</p>
    </div>

    <div style="margin: 30px 0;">
      <h3>B. 符号弱化（平衡最佳）</h3>
      <div style="background: white; padding: 20px; border: 2px solid #10b981; border-radius: 8px;">
        <h2 style="font-size: 24px; margin: 0;">
          <span style="color: #9ca3af; font-weight: 400;">## </span>
          <span style="color: #111827; font-weight: 600;">深度学习入门指南</span>
        </h2>
        <p style="margin: 10px 0 0 0;">本章将介绍深度学习的基本概念...</p>
      </div>
      <p style="font-size: 14px; color: #10b981;">✅ 符号存在但不突兀，你的目光直接聚焦在"深度学习入门指南"上</p>
    </div>
  </div>

  <!-- 最终总结 -->
  <div class="demo-box" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
    <h2 style="color: white;">✅ 总结：符号弱化的意义</h2>
    
    <div style="font-size: 18px; line-height: 1.8;">
      <p><strong>核心目标：在"编辑体验"和"阅读体验"之间找到完美平衡</strong></p>
      
      <ol style="margin: 20px 0;">
        <li><strong>保留上下文</strong>：你始终知道自己在编辑什么结构（H1/H2/H3）</li>
        <li><strong>减少干扰</strong>：灰色符号不会抢夺注意力，让你专注于内容</li>
        <li><strong>学习友好</strong>：新手能看到 Markdown 语法，自然学习</li>
        <li><strong>编辑高效</strong>：修改层级、调整结构时更直观</li>
        <li><strong>视觉舒适</strong>：接近最终渲染效果，但保留了"源码可见"的优势</li>
      </ol>

      <div style="background: rgba(0,0,0,0.2); padding: 20px; border-radius: 8px; margin-top: 25px;">
        <strong>📌 一句话总结：</strong><br>
        符号弱化让你在"看到源码"的同时，享受"渲染预览"的视觉体验。<br>
        这就是 Obsidian 风格 Live Preview 的核心魅力！
      </div>
    </div>
  </div>

  <!-- 代码实现 -->
  <div class="demo-box">
    <h2>💻 CSS 实现原理</h2>
    <p>你的代码：</p>
    <pre style="background: #1f2937; color: #d1d5db; padding: 20px; border-radius: 8px; overflow-x: auto;"><code>.editor-editable > div[data-line-type='heading-2']::first-line {
  color: var(--lp-token-color);  /* 灰色 #9ca3af */
}</code></pre>
    
    <p><strong>工作原理：</strong></p>
    <ol>
      <li>选择 H2 标题元素的第一行（包含 <code>##</code> 和标题文字）</li>
      <li>将整行颜色设置为灰色（<code>--lp-token-color</code>）</li>
      <li>视觉效果：符号和文字都变灰，降低整体视觉权重</li>
    </ol>

    <div class="info-box">
      <strong>💡 注意：</strong>你的代码注释中提到"阶段3 用 ::before 伪元素"。这是因为 <code>::first-line</code> 在长标题换行时会让第二行也变灰。更精确的做法是用 <code>::before</code> 伪元素只渲染符号部分，而让正文保持深色。
    </div>
  </div>

</body>
</html>
