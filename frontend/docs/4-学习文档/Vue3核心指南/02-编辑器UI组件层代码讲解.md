## 1. EditorContent.vue æ·±åº¦è§£æ

### ğŸ—ï¸ æ•´ä½“æ¶æ„

```vue
<script setup>
// 1. å¯¼å…¥ä¾èµ–
import { ref, reactive } from 'vue'
import type { EditorState } from '../types/editor'
import { useSelection } from '../composables/useSelection'
import { useMarkdown } from '../composables/useMarkdown'

// 2. åˆ›å»ºæ¨¡æ¿å¼•ç”¨
const editorRef = ref<HTMLDivElement | null>(null)

// 3. åˆ›å»ºçŠ¶æ€å¯¹è±¡
const editorState = reactive<EditorState>({...})

// 4. åˆå§‹åŒ– Composables
const selectionAPI = useSelection(editorRef, editorState)
const markdownAPI = useMarkdown(editorState, selectionAPI)

// 5. æš´éœ² API
defineExpose({...})
</script>
```

### ğŸ’¡ å…³é”®æ¦‚å¿µ 1ï¼šref vs reactive

**ref** - åŒ…è£…å•ä¸ªå€¼ï¼š

```typescript
// âœ… ref ç”¨äºå•ä¸ªå€¼æˆ–å¯¹è±¡å¼•ç”¨
const editorRef = ref<HTMLDivElement | null>(null)
// editorRef.value = DOM å…ƒç´ 

const count = ref(0)
// count.value = 0
```

**reactive** - åŒ…è£…å¯¹è±¡ï¼š

```typescript
// âœ… reactive ç”¨äºå¯¹è±¡
const editorState = reactive<EditorState>({
  content: '',
  selection: {...}
})
// ç›´æ¥è®¿é—®å±æ€§ï¼Œä¸éœ€è¦ .value
editorState.content = 'new content'
```

**ä½•æ—¶ç”¨ refï¼Ÿä½•æ—¶ç”¨ reactiveï¼Ÿ**

```typescript
// âœ… é€‚åˆç”¨ ref
const count = ref(0) // åŸºæœ¬ç±»å‹
const message = ref('hello') // å­—ç¬¦ä¸²
const element = ref<HTMLElement>() // DOM å¼•ç”¨
const user = ref({ name: 'John' }) // å•ä¸ªå¯¹è±¡ï¼ˆå¯èƒ½è¢«æ•´ä½“æ›¿æ¢ï¼‰

// âœ… é€‚åˆç”¨ reactive
const form = reactive({
  // å¤æ‚å¯¹è±¡
  username: '',
  password: '',
  errors: [],
})

const state = reactive({
  // çŠ¶æ€é›†åˆ
  loading: false,
  data: null,
  error: null,
})
```

### ğŸ’¡ å…³é”®æ¦‚å¿µ 2ï¼šComposable æ¨¡å¼

**ä»€ä¹ˆæ˜¯ Composableï¼Ÿ**

Composable æ˜¯å¯å¤ç”¨çš„ç»„åˆå¼å‡½æ•°ï¼Œç”¨äºå°è£…é€»è¾‘ã€‚

**EditorContent.vue ä¸­çš„åº”ç”¨**ï¼š

```typescript
// useSelection - å°è£…å…‰æ ‡å’Œé€‰åŒºæ“ä½œ
const selectionAPI = useSelection(editorRef, editorState)
// è¿”å›: { getSelectionInfo, setCursor, selectRange, replaceRange, ... }

// useMarkdown - å°è£… Markdown æ ¼å¼åŒ–
const markdownAPI = useMarkdown(editorState, selectionAPI)
// è¿”å›: { applyInlineFormat, applyParagraphFormat, insertBlock }
```

**ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ**

```typescript
// âŒ ä¸å¥½çš„åšæ³•ï¼šæ‰€æœ‰é€»è¾‘åœ¨ç»„ä»¶é‡Œ
const EditorContent = {
  setup() {
    // 1000+ è¡Œä»£ç 
    const handleBold = () => {...}
    const handleItalic = () => {...}
    const handleHeading = () => {...}
    // ...
  }
}

// âœ… å¥½çš„åšæ³•ï¼šé€»è¾‘åˆ†ç¦»åˆ° Composables
const EditorContent = {
  setup() {
    // åªæœ‰ 10+ è¡Œé›†æˆä»£ç 
    const markdownAPI = useMarkdown(...)
    defineExpose({ ...markdownAPI })
  }
}
```

**å¥½å¤„**ï¼š

1. âœ… **å¯å¤ç”¨** - å…¶ä»–ç»„ä»¶ä¹Ÿèƒ½ç”¨ useMarkdown
2. âœ… **å¯æµ‹è¯•** - å•ç‹¬æµ‹è¯• useMarkdown
3. âœ… **æ˜“ç»´æŠ¤** - èŒè´£æ¸…æ™°ï¼Œä¿®æ”¹å±€éƒ¨
4. âœ… **æ˜“ç†è§£** - ç»„ä»¶ä»£ç ç®€æ´

### ğŸ’¡ å…³é”®æ¦‚å¿µ 3ï¼šdefineExpose çš„å¦™ç”¨

**ä¸ºä»€ä¹ˆéœ€è¦ defineExposeï¼Ÿ**

```vue
<!-- çˆ¶ç»„ä»¶ MarkdownEditor.vue -->
<template>
  <EditorContent ref="editorContentRef" />
  <button @click="makeBold">åŠ ç²—</button>
</template>

<script setup>
const editorContentRef = ref()

const makeBold = () => {
  // âŒ å¦‚æœ EditorContent æ²¡æœ‰ defineExposeï¼Œè¿™ä¸ä¼šå·¥ä½œ
  editorContentRef.value?.applyInlineFormat('bold')
}
</script>
```

**EditorContent ä¸­çš„å®ç°**ï¼š

```typescript
// æš´éœ²æ‰€æœ‰ Composable çš„æ–¹æ³•
defineExpose({
  ...selectionAPI, // getSelectionInfo, setCursor, selectRange, ...
  ...markdownAPI, // applyInlineFormat, applyParagraphFormat, insertBlock
  editorElement: editorRef, // æš´éœ² DOM å¼•ç”¨
  state: editorState, // æš´éœ²çŠ¶æ€
})
```

**å±•å¼€è¿ç®—ç¬¦ (...)çš„ä½œç”¨**ï¼š

```typescript
// selectionAPI = { getSelectionInfo, setCursor, selectRange }
// markdownAPI = { applyInlineFormat, applyParagraphFormat, insertBlock }

// ...selectionAPI å±•å¼€åï¼š
{
  getSelectionInfo: function() {...},
  setCursor: function() {...},
  selectRange: function() {...},
}

// æœ€ç»ˆ defineExpose å¾—åˆ°ï¼š
{
  getSelectionInfo: function() {...},
  setCursor: function() {...},
  selectRange: function() {...},
  applyInlineFormat: function() {...},
  applyParagraphFormat: function() {...},
  insertBlock: function() {...},
  editorElement: editorRef,
  state: editorState
}
```

---

## 2. EditorToolbar.vue æ·±åº¦è§£æ

### ğŸ—ï¸ äº‹ä»¶åˆ†å‘æ¨¡å¼

**è®¾è®¡æ€è·¯**ï¼š

```vue
<script setup>
// å®šä¹‰åˆ†ç±»çš„äº‹ä»¶ç±»å‹
interface Emits {
  (e: 'inline-format', action: InlineFormatType): void
  (e: 'paragraph-format', action: ParagraphFormatType): void
  (e: 'insert-block', action: BlockInsertType): void
}

const emit = defineEmits<Emits>()

// æ™ºèƒ½åˆ†å‘å‡½æ•°
const handleFormat = (action: string) => {
  const inlineFormats: InlineFormatType[] = ['bold', 'italic', 'code', 'highlight', 'link']
  if (inlineFormats.includes(action as InlineFormatType)) {
    emit('inline-format', action as InlineFormatType)
    return
  }

  const paragraphFormats: ParagraphFormatType[] = ['heading1', 'heading2', 'heading3', 'quote']
  if (paragraphFormats.includes(action as ParagraphFormatType)) {
    emit('paragraph-format', action as ParagraphFormatType)
    return
  }
}
</script>
```

### ğŸ’¡ ä¸ºä»€ä¹ˆè¦åˆ†ç±»äº‹ä»¶ï¼Ÿ

**æ–¹æ¡ˆ Aï¼šå•ä¸€äº‹ä»¶ï¼ˆä¸æ¨èï¼‰**

```typescript
// âŒ æ‰€æœ‰æŒ‰é’®å‘å‡ºåŒä¸€ä¸ªäº‹ä»¶
interface Emits {
  (e: 'format', action: string): void
}

// çˆ¶ç»„ä»¶éœ€è¦è‡ªå·±åˆ¤æ–­ç±»å‹
const handleFormat = (action: string) => {
  if (action === 'bold' || action === 'italic') {
    editorContentRef.value?.applyInlineFormat(action)
  } else if (action === 'heading1' || action === 'heading2') {
    editorContentRef.value?.applyParagraphFormat(action)
  }
  // é€»è¾‘æ··ä¹±ï¼
}
```

**æ–¹æ¡ˆ Bï¼šåˆ†ç±»äº‹ä»¶ï¼ˆæ¨èï¼‰âœ…**

```typescript
// âœ… å·¥å…·æ ï¼šåˆ†ç±»å‘å‡ºäº‹ä»¶
emit('inline-format', 'bold')
emit('paragraph-format', 'heading1')
emit('insert-block', 'codeBlock')

// âœ… çˆ¶ç»„ä»¶ï¼šæ¸…æ™°çš„æ˜ å°„
const handleInlineFormat = (action) => {
  editorContentRef.value?.applyInlineFormat(action)
}

const handleParagraphFormat = (action) => {
  editorContentRef.value?.applyParagraphFormat(action)
}
```

**å¥½å¤„**ï¼š

1. âœ… **ç±»å‹å®‰å…¨** - TypeScript ç²¾ç¡®ç±»å‹æ£€æŸ¥
2. âœ… **èŒè´£æ¸…æ™°** - å·¥å…·æ åˆ†ç±»ï¼Œçˆ¶ç»„ä»¶ç®€å•æ˜ å°„
3. âœ… **æ˜“æ‰©å±•** - æ–°å¢æŒ‰é’®åªéœ€æ·»åŠ åˆ°å¯¹åº”åˆ†ç±»

### ğŸ’¡ TypeScript ç±»å‹ä¿æŠ¤

```typescript
const handleFormat = (action: string) => {
  // âš ï¸ action æ˜¯ stringï¼Œä¸å®‰å…¨

  if (inlineFormats.includes(action as InlineFormatType)) {
    // âœ… è¿™é‡Œ TypeScript çŸ¥é“ action æ˜¯ InlineFormatType
    emit('inline-format', action as InlineFormatType)
    return
  }
}
```

**ç±»å‹è½¬æ¢ï¼ˆasï¼‰çš„ä½œç”¨**ï¼š

```typescript
// string â†’ InlineFormatType
action as InlineFormatType

// ç­‰ä»·äºå‘Šè¯‰ TypeScriptï¼š
// "æˆ‘ç¡®å®š action æ˜¯ InlineFormatTypeï¼Œè¯·ç›¸ä¿¡æˆ‘"
```

---

## 3. MarkdownEditor.vue æ·±åº¦è§£æ

### ğŸ—ï¸ ç»„ä»¶ç»„åˆæ¨¡å¼

**æ ¸å¿ƒæ€æƒ³**ï¼šä¸€ä¸ªçˆ¶ç»„ä»¶ç»„åˆå¤šä¸ªå­ç»„ä»¶

```vue
<template>
  <div class="markdown-editor">
    <!-- å­ç»„ä»¶1ï¼šæ ‡é¢˜ -->
    <div v-if="showTitle" class="editor-title">
      <input v-model="title" @input="handleTitleChange" />
    </div>

    <!-- å­ç»„ä»¶2ï¼šå·¥å…·æ  -->
    <EditorToolbar
      @inline-format="handleInlineFormat"
      @paragraph-format="handleParagraphFormat"
      @insert-block="handleInsertBlock"
    />

    <!-- å­ç»„ä»¶3ï¼šç¼–è¾‘åŒº -->
    <EditorContent ref="editorContentRef" @update:modelValue="handleContentChange" />
  </div>
</template>
```

**æ•°æ®æµ**ï¼š

```
ç”¨æˆ·ç‚¹å‡»å·¥å…·æ "åŠ ç²—"æŒ‰é’®
    â†“
EditorToolbar emit('inline-format', 'bold')
    â†“
MarkdownEditor handleInlineFormat('bold')
    â†“
è°ƒç”¨ editorContentRef.value.applyInlineFormat('bold')
    â†“
EditorContent æ‰§è¡ŒåŠ ç²—æ“ä½œ
    â†“
EditorContent emit('update:modelValue', newContent)
    â†“
MarkdownEditor handleContentChange(newContent)
    â†“
æ›´æ–°æœ¬åœ° content + å‘å‡ºäº‹ä»¶ç»™çˆ¶ç»„ä»¶
```

### ğŸ’¡ äº‹ä»¶ä¼ é€’é“¾

**å±‚çº§ç»“æ„**ï¼š

```
ParentComponent (ä½¿ç”¨è€…)
    â†“
MarkdownEditor (å®¹å™¨)
    â”œâ”€ EditorToolbar (å·¥å…·æ )
    â””â”€ EditorContent (ç¼–è¾‘åŒº)
```

**å‘ä¸‹ä¼ é€’ï¼ˆPropsï¼‰**ï¼š

```typescript
// ParentComponent â†’ MarkdownEditor
<MarkdownEditor v-model="content" :show-title="true" />

// MarkdownEditor â†’ EditorContent
<EditorContent ref="editorContentRef" />
// æ³¨æ„ï¼šè¿™é‡Œé€šè¿‡ ref è°ƒç”¨æ–¹æ³•ï¼Œä¸æ˜¯é€šè¿‡ Props
```

**å‘ä¸Šä¼ é€’ï¼ˆEventsï¼‰**ï¼š

```typescript
// EditorContent â†’ MarkdownEditor
emit('update:modelValue', newContent)

// MarkdownEditor â†’ ParentComponent
emit('update:modelValue', content.value)
emit('change', content.value, title.value)
```

### ğŸ’¡ v-model æ·±åº¦ç†è§£

**å®Œæ•´çš„ v-model å·¥ä½œæµ**ï¼š

```vue
<!-- çˆ¶ç»„ä»¶ -->
<template>
  <div>
    <MarkdownEditor v-model="content" />
    <p>{{ content }}</p>
    <!-- å®æ—¶æ˜¾ç¤ºç¼–è¾‘å™¨å†…å®¹ -->
  </div>
</template>

<script setup>
const content = ref('åˆå§‹å†…å®¹')
// content ä¼šè‡ªåŠ¨ä¸ç¼–è¾‘å™¨åŒæ­¥
</script>
```

**èƒŒåå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ**

**1. åˆå§‹åŒ–é˜¶æ®µ**ï¼š

```
çˆ¶ç»„ä»¶: content = 'åˆå§‹å†…å®¹'
    â†“ ä¼ é€’ Props
MarkdownEditor: props.modelValue = 'åˆå§‹å†…å®¹'
    â†“ åˆå§‹åŒ–å†…éƒ¨çŠ¶æ€
MarkdownEditor: content = ref('åˆå§‹å†…å®¹')
```

**2. ç”¨æˆ·ç¼–è¾‘é˜¶æ®µ**ï¼š

```
ç”¨æˆ·åœ¨ç¼–è¾‘å™¨ä¸­è¾“å…¥ "æ–°"
    â†“
EditorContent: emit('update:modelValue', 'åˆå§‹å†…å®¹æ–°')
    â†“
MarkdownEditor: handleContentChange('åˆå§‹å†…å®¹æ–°')
    â†“ æ›´æ–°å†…éƒ¨çŠ¶æ€
MarkdownEditor: content.value = 'åˆå§‹å†…å®¹æ–°'
    â†“ å‘å‡ºäº‹ä»¶
MarkdownEditor: emit('update:modelValue', 'åˆå§‹å†…å®¹æ–°')
    â†“ çˆ¶ç»„ä»¶æ¥æ”¶
çˆ¶ç»„ä»¶: content.value = 'åˆå§‹å†…å®¹æ–°'
```

**3. çˆ¶ç»„ä»¶æ›´æ–°é˜¶æ®µ**ï¼š

```
çˆ¶ç»„ä»¶ç‚¹å‡»"é‡ç½®": content.value = 'æ–°å†…å®¹'
    â†“ Props å˜åŒ–
MarkdownEditor: props.modelValue å˜ä¸º 'æ–°å†…å®¹'
    â†“ watch æ£€æµ‹åˆ°å˜åŒ–
MarkdownEditor: watch(() => props.modelValue, ...)
    â†“ æ›´æ–°å†…éƒ¨çŠ¶æ€
MarkdownEditor: content.value = 'æ–°å†…å®¹'
```

### ğŸ’¡ é˜²æ­¢å¾ªç¯è§¦å‘çš„å…³é”®

**é—®é¢˜ä»£ç **ï¼ˆä¼šå¾ªç¯ï¼‰ï¼š

```typescript
// âŒ ä¼šå¯¼è‡´æ— é™å¾ªç¯
watch(
  () => props.modelValue,
  (newValue) => {
    content.value = newValue // â† è¿™ä¼šè§¦å‘ handleContentChange
  },
)

const handleContentChange = (value: string) => {
  content.value = value // â† è¿™ä¼šè§¦å‘ watch
  emit('update:modelValue', value)
}
```

**å¾ªç¯ç¤ºæ„å›¾**ï¼š

```
watch è§¦å‘ â†’ content.value æ”¹å˜ â†’ handleContentChange è§¦å‘
    â†‘                                        â†“
    â†â†â†â†â†â†â†â†    emit äº‹ä»¶     â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†
```

**ä¿®å¤ä»£ç **ï¼ˆé˜²æ­¢å¾ªç¯ï¼‰ï¼š

```typescript
// âœ… æ­£ç¡®ï¼šåªæœ‰å½“å€¼ä¸åŒæ—¶æ‰æ›´æ–°
watch(
  () => props.modelValue,
  (newValue) => {
    if (newValue !== undefined && newValue !== content.value) {
      content.value = newValue // âœ… ä¸ä¼šè§¦å‘å¾ªç¯
    }
  },
)
```

**ä¸ºä»€ä¹ˆè¿™æ ·èƒ½é˜²æ­¢å¾ªç¯ï¼Ÿ**

```
æƒ…å†µ1ï¼šçˆ¶ç»„ä»¶ä¸»åŠ¨æ›´æ–°
  props.modelValue: 'æ—§' â†’ 'æ–°'
  content.value: 'æ—§'
  â†’ newValue ('æ–°') !== content.value ('æ—§') âœ…
  â†’ æ‰§è¡Œæ›´æ–°

æƒ…å†µ2ï¼šå­ç»„ä»¶ç¼–è¾‘åçš„åé¦ˆ
  props.modelValue: 'æ–°' â†’ 'æ–°' (çˆ¶ç»„ä»¶æ›´æ–°äº†)
  content.value: 'æ–°' (å·²ç»æ›´æ–°è¿‡äº†)
  â†’ newValue ('æ–°') === content.value ('æ–°') âœ…
  â†’ ä¸æ‰§è¡Œæ›´æ–°ï¼Œé¿å…å¾ªç¯
```

---

## 4. ä¸‰ä¸ªç»„ä»¶çš„åä½œæµç¨‹

### é€šä¿¡æ–¹å¼å…¨æ™¯å›¾

è¿™ä¸‰ä¸ªç»„ä»¶ä½¿ç”¨äº† Vue ä¸­ä¸‰ç§æ ¸å¿ƒçš„é€šä¿¡æ¨¡å¼ï¼Œå„å¸å…¶èŒï¼š

#### 1. Props (æ•°æ®ä¸‹è¡Œ) â¬‡ï¸

- **æ–¹å‘**ï¼š`MarkdownEditor` (çˆ¶) â†’ `EditorContent` (å­)
- **ç”¨é€”**ï¼šä¼ é€’åˆå§‹å†…å®¹å’Œåç»­æ›´æ–°ã€‚
- **ä»£ç **ï¼š`<EditorContent v-model="content" />` (æœ¬è´¨æ˜¯ `:modelValue="content"`)

#### 2. Events (äº‹ä»¶ä¸Šè¡Œ) â¬†ï¸

- **æ–¹å‘**ï¼šå­ç»„ä»¶ â†’ `MarkdownEditor` (çˆ¶)
- **ç”¨é€”**ï¼šé€šçŸ¥çˆ¶ç»„ä»¶å‘ç”Ÿäº†ä»€ä¹ˆï¼ˆç”¨æˆ·ç‚¹å‡»äº†æŒ‰é’®ã€å†…å®¹å˜äº†ï¼‰ã€‚
- **åœºæ™¯**ï¼š
  - `EditorToolbar` å‘å‡º `inline-format`ï¼šå‘Šè¯‰çˆ¶ç»„ä»¶"ç”¨æˆ·æƒ³åŠ ç²—"ã€‚
  - `EditorContent` å‘å‡º `update:modelValue`ï¼šå‘Šè¯‰çˆ¶ç»„ä»¶"å†…å®¹å˜äº†"ã€‚

#### 3. Expose / Ref (å‘½ä»¤å¼è°ƒç”¨) âš¡ï¸

- **æ–¹å‘**ï¼š`MarkdownEditor` (çˆ¶) â†’ `EditorContent` (å­)
- **ç”¨é€”**ï¼šçˆ¶ç»„ä»¶ç›´æ¥è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•ã€‚
- **åœºæ™¯**ï¼šçˆ¶ç»„ä»¶æ”¶åˆ°"åŠ ç²—"æŒ‡ä»¤åï¼Œé€šè¿‡ `editorContentRef.value.applyInlineFormat()` å‘½ä»¤å­ç»„ä»¶æ‰§è¡Œæ“ä½œã€‚
- **ä¸ºä»€ä¹ˆä¸ç”¨ Propsï¼Ÿ** å› ä¸º"åŠ ç²—"æ˜¯ä¸€ä¸ª**åŠ¨ä½œ**ï¼Œä¸æ˜¯ä¸€ä¸ª**çŠ¶æ€**ã€‚ç”¨æ–¹æ³•è°ƒç”¨æ›´åˆé€‚ã€‚

---

### ğŸ”„ å®Œæ•´äº¤äº’æµç¨‹

**åœºæ™¯ï¼šç”¨æˆ·ç‚¹å‡»"åŠ ç²—"æŒ‰é’®**

```
1. ç”¨æˆ·ç‚¹å‡» EditorToolbar çš„ Bold æŒ‰é’®
   â””â”€ @click="handleFormat('bold')"

2. EditorToolbar.vue
   â”œâ”€ handleFormat('bold') æ‰§è¡Œ
   â”œâ”€ åˆ¤æ–­ 'bold' å±äº inlineFormats
   â””â”€ emit('inline-format', 'bold')

3. MarkdownEditor.vue
   â”œâ”€ æ¥æ”¶äº‹ä»¶ @inline-format="handleInlineFormat"
   â”œâ”€ handleInlineFormat('bold') æ‰§è¡Œ
   â””â”€ editorContentRef.value?.applyInlineFormat('bold')

4. EditorContent.vue
   â”œâ”€ applyInlineFormat('bold') è¢«è°ƒç”¨
   â”œâ”€ è°ƒç”¨ markdownAPI.applyInlineFormat('bold')
   â”œâ”€ æ‰§è¡Œ useMarkdown ä¸­çš„é€»è¾‘
   â”œâ”€ æ›´æ–° DOM
   â””â”€ emit('update:modelValue', newContent)

5. MarkdownEditor.vue
   â”œâ”€ æ¥æ”¶äº‹ä»¶ @update:modelValue="handleContentChange"
   â”œâ”€ handleContentChange(newContent) æ‰§è¡Œ
   â”œâ”€ content.value = newContent
   â”œâ”€ emit('update:modelValue', newContent)
   â””â”€ emit('change', content.value, title.value)

6. çˆ¶ç»„ä»¶ï¼ˆå¦‚æœæœ‰ï¼‰
   â””â”€ æ¥æ”¶åˆ°å†…å®¹æ›´æ–°
```

### ğŸ“Š ç»„ä»¶èŒè´£å¯¹ç…§è¡¨

| ç»„ä»¶               | èŒè´£                   | è¾“å…¥       | è¾“å‡º         |
| ------------------ | ---------------------- | ---------- | ------------ |
| **EditorToolbar**  | UIå±•ç¤º+äº‹ä»¶å‘å‡º        | ç”¨æˆ·ç‚¹å‡»   | åˆ†ç±»äº‹ä»¶     |
| **EditorContent**  | contenteditable+æ ¼å¼åŒ– | æ ¼å¼åŒ–å‘½ä»¤ | æ–°å†…å®¹       |
| **MarkdownEditor** | ç»„ä»¶ç»„åˆ+æ•°æ®åè°ƒ      | Props      | v-model+äº‹ä»¶ |

---

## ğŸ¯ å…³é”®è®¾è®¡æ¨¡å¼æ€»ç»“

### 1. **ç»„åˆå¼ APIï¼ˆComposition APIï¼‰**

```typescript
// ç”¨ Composables å°è£…å¯å¤ç”¨é€»è¾‘
const selectionAPI = useSelection(...)
const markdownAPI = useMarkdown(...)
```

### 2. **å®¹å™¨ç»„ä»¶æ¨¡å¼ï¼ˆContainer Patternï¼‰**

```vue
<!-- MarkdownEditor æ˜¯å®¹å™¨ -->
<MarkdownEditor>
  <EditorToolbar />  <!-- å­ç»„ä»¶ -->
  <EditorContent />  <!-- å­ç»„ä»¶ -->
</MarkdownEditor>
```

### 3. **å•å‘æ•°æ®æµ + äº‹ä»¶å›ä¼ **

```
Props å‘ä¸‹ â†“
         Container
Events å‘ä¸Š â†‘
```

### 4. **API æš´éœ²æ¨¡å¼**

```typescript
// å­ç»„ä»¶æš´éœ²æ–¹æ³•
defineExpose({ applyInlineFormat, ... })

// çˆ¶ç»„ä»¶é€šè¿‡ ref è°ƒç”¨
editorRef.value.applyInlineFormat('bold')
```

---

## ğŸ’¡ å­¦ä¹ è·¯å¾„å»ºè®®

### é˜¶æ®µ 1ï¼šç†è§£å•ä¸ªæ¦‚å¿µ

1. ref / reactive
2. Props / Emits
3. v-model

### é˜¶æ®µ 2ï¼šç†è§£ç»„ä»¶äº¤äº’

1. çˆ¶å­ç»„ä»¶é€šä¿¡
2. v-model åŒå‘ç»‘å®š
3. defineExpose API æš´éœ²

### é˜¶æ®µ 3ï¼šç†è§£æ¶æ„è®¾è®¡

1. Composable æŠ½è±¡
2. å®¹å™¨ç»„ä»¶æ¨¡å¼
3. äº‹ä»¶åˆ†å‘ç­–ç•¥

---

## ğŸ” è°ƒè¯•æŠ€å·§

### 1. æŸ¥çœ‹ ref.value

```typescript
const editorRef = ref()

onMounted(() => {
  console.log('editorRef:', editorRef.value)
  console.log('methods:', Object.keys(editorRef.value))
})
```

### 2. ç›‘å¬ Props å˜åŒ–

```typescript
watch(
  () => props.modelValue,
  (newValue, oldValue) => {
    console.log('Props changed:', oldValue, 'â†’', newValue)
  },
)
```

### 3. è¿½è¸ªäº‹ä»¶æµ

```typescript
const emit = defineEmits<Emits>()

const emitWithLog = (event: string, ...args: any[]) => {
  console.log(`[Emit] ${event}:`, args)
  emit(event, ...args)
}
```

---
