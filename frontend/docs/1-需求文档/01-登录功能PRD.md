# 登录功能需求文档

> **文档版本**：v1.0  
> **创建日期**：2024-12-08  
> **状态**：待开发
> **参考设计**：https://crelay.net/#/login

---

## 1. 概述

### 1.1 背景

博客平台需要用户认证功能，以支持：

- 识别用户身份
- 保护个人内容（文章、评论）
- 实现个性化体验

### 1.2 目标

实现用户登录页面，完成前端认证流程闭环。

### 1.3 用户人群

- 博客作者（需要登录后发布/管理文章）
- 普通读者（需要登录后评论、点赞）

---

## 2. 功能需求

### 2.1 功能列表

| 功能          | 优先级 | 说明                       |
| ------------- | ------ | -------------------------- |
| 登录表单      | P0     | 用户名/密码输入、登录按钮  |
| 表单验证      | P0     | 前端实时校验               |
| 登录 API 调用 | P0     | 调用后端接口，处理响应     |
| Token 管理    | P0     | 存储、读取、清除 JWT Token |
| 登录状态管理  | P0     | Pinia Store 管理用户状态   |
| 登录后跳转    | P0     | 跳转到首页或来源页面       |
| 密码显隐切换  | P1     | 点击图标切换密码可见性     |
| Loading 状态  | P1     | 登录中显示加载动画         |
| 错误提示      | P0     | 友好的错误信息展示         |

### 2.2 详细说明

#### 2.2.1 登录表单

**输入字段**：

| 字段  | 类型       | 必填  | 验证规则    |
| --- | -------- | --- | ------- |
| 用户名 | text     | ✅   | 非空      |
| 密码  | password | ✅   | 非空、最少6位 |

**按钮**：

- 登录按钮：提交表单
- 跳转链接：「没有账号？去注册」

#### 2.2.2 表单验证

| 场景       | 验证时机  | 提示信息         |
| ---------- | --------- | ---------------- |
| 用户名为空 | 失焦/提交 | 请输入用户名     |
| 密码为空   | 失焦/提交 | 请输入密码       |
| 密码太短   | 失焦/提交 | 密码至少6位      |
| 登录失败   | API 返回  | 用户名或密码错误 |

#### 2.2.3 登录流程

```
用户打开登录页
    ↓
填写用户名、密码
    ↓
点击登录按钮
    ↓
前端验证 ─── 失败 → 显示错误提示
    ↓ 成功
显示 Loading
    ↓
调用后端 API
    ↓
后端响应 ─── 失败 → 显示错误提示
    ↓ 成功
保存 Token 到 localStorage
    ↓
更新 Pinia 用户状态
    ↓
跳转到首页（或来源页面）
```

---

## 3. UI 设计

### 3.1 页面布局

参考：https://crelay.net/#/login

![[2-设计文档/登录功能/登录页面ui.png]]
### 3.2 设计要点

| 元素     | 说明                         |
| -------- | ---------------------------- |
| 卡片     | 白色背景、圆角、阴影         |
| 输入框   | 带图标前缀、focus 时边框高亮 |
| 按钮     | 品牌色、hover 效果、禁用态   |
| 错误提示 | 红色文字、输入框下方         |

---

## 4. 技术依赖

### 4.1 后端 API

| 接口  | 方法   | 路径                 | 说明           |
| --- | ---- | ------------------ | ------------ |
| 登录  | POST | /api/v1/auth/login | 返回 JWT Token |

**请求体**：

```json
{
  "username": "string",
  "password": "string"
}
```

**成功响应**：

```json
{
  "access_token": "string",
  "token_type": "bearer"
}
```

### 4.2 前端技术

| 模块       | 技术         | 文件              |
| ---------- | ------------ | ----------------- |
| 页面组件   | Vue 3        | `views/Login.vue` |
| 状态管理   | Pinia        | `stores/auth.ts`  |
| HTTP 请求  | Axios        | `utils/api.ts`    |
| Token 管理 | localStorage | `utils/token.ts`  |
| 路由守卫   | Vue Router   | `router/index.ts` |

---

## 5. 验收标准

### 5.1 功能验收

- [ ] 输入正确用户名密码，能够成功登录
- [ ] 登录成功后跳转到首页
- [ ] 登录成功后，Pinia Store 中有用户信息
- [ ] 刷新页面后，登录状态保持
- [ ] 输入错误密码，显示错误提示
- [ ] 表单验证正常工作

### 5.2 UI 验收

- [ ] 页面布局美观、居中显示
- [ ] 输入框 focus 状态明显
- [ ] 登录按钮有 hover 效果
- [ ] 错误提示清晰可见
- [ ] 移动端响应式适配

---

## 6. 后续扩展（Phase 2）

| 功能     | 说明                  |
| ------ | ------------------- |
| 注册页面   | 新用户注册               |
| 忘记密码   | 密码重置流程              |
| 记住我    | 延长 Token 有效期        |
| 第三方登录  | GitHub/Google OAuth |
| 右上角工具栏 | 主题切换、国际化、个人中心       |
