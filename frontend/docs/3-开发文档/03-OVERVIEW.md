> **æ–‡æ¡£ç”¨é€”**ï¼šè®°å½•é¡¹ç›®å·²å®ŒæˆåŠŸèƒ½æ¦‚è§ˆ
> **æ›´æ–°é¢‘ç‡**ï¼šPhase å®Œæˆ

# å·²å®ŒæˆåŠŸèƒ½ overview

## Phase 1: æ­å»ºå‰ç«¯åŸºç¡€æ¶æ„å’Œè®¾è®¡ç³»ç»Ÿ

**ç›®æ ‡**ï¼šæŒæ¡ Vue 3 æ ¸å¿ƒæ¦‚å¿µï¼Œåˆæ­¥äº†è§£å‰ç«¯å¸¸ç”¨æ¡†æ¶å’ŒæŠ€æœ¯

### 1. å¼€å‘ç¯å¢ƒæ­å»º

- âœ… åˆå§‹åŒ– Vite + Vue 3 + TypeScript é¡¹ç›®
- âœ… é…ç½® ESLint å’Œ Prettier
- âœ… å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆPort 5174ï¼‰

### 2. å­¦ä¹ å‰ç«¯é¡¹ç›®ç»“æ„

```
fastapi_blog/
â”œâ”€â”€ app/              # åç«¯ä»£ç ï¼ˆå·²å®Œæˆ FastAPIï¼‰
â”œâ”€â”€ frontend/         # å‰ç«¯ä»£ç ï¼ˆæ–°å»º Vue 3ï¼‰
â”‚   â”œâ”€â”€ docs/
â”‚   â”‚   â”œâ”€â”€ design/   # å‰ç«¯è®¾è®¡æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ learning/ # å‰ç«¯å­¦ä¹ æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ project/  # å‰ç«¯é¡¹ç›®ç®¡ç†æ–‡æ¡£
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/          # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ PostDetail.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ PostCreate.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ Register.vue
â”‚   â”‚   â”‚   â””â”€â”€ Profile.vue
â”‚   â”‚   â”œâ”€â”€ components/     # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ Footer.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ CommentList.vue
â”‚   â”‚   â”‚   â””â”€â”€ MarkdownEditor.vue
â”‚   â”‚   â”œâ”€â”€ composables/    # ç»„åˆå¼å‡½æ•°ï¼ˆé€»è¾‘å¤ç”¨ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ usePosts.ts
â”‚   â”‚   â”‚   â””â”€â”€ useComments.ts
â”‚   â”‚   â”œâ”€â”€ stores/         # Pinia å…¨å±€çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ posts.ts
â”‚   â”‚   â”‚   â””â”€â”€ notifications.ts
â”‚   â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts      # Axios å®ä¾‹ + æ‹¦æˆªå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ token.ts    # JWT Token ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ format.ts   # æ—¥æœŸã€æ–‡æœ¬æ ¼å¼åŒ–
â”‚   â”‚   â”œâ”€â”€ router/         # Vue Router é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ assets/         # é™æ€èµ„æº
â”‚   â”‚   â”‚   â”œâ”€â”€ mian.css    # å…¨å±€æ ·å¼
â”‚   â”‚   â”‚   â””â”€â”€ images/
â”‚   â”‚   â”œâ”€â”€ App.vue         # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.ts         # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ index.html          # åº”ç”¨çš„ HTML å…¥å£ç‚¹
â”‚   â”œâ”€â”€ public/             # é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json        # å‰ç«¯é¡¹ç›®åŒ…ç®¡ç†
â”‚   â”œâ”€â”€ vite.config.ts      # Vite é…ç½®
â”‚   â”œâ”€â”€ tsconfig.json       # TypeScript é…ç½®
â””â”€â”€ (åç«¯æ–‡ä»¶çœç•¥...)
```

### 3. å‰ç«¯æŠ€æœ¯æ ˆç¡®è®¤

| åˆ†ç±»              | æŠ€æœ¯æ ˆ                | è¯´æ˜                       |
| ----------------- | --------------------- | -------------------------- |
| **æ¡†æ¶å±‚**        | Vue 3 Composition API | ç°ä»£ã€æ˜“å­¦ã€å®˜æ–¹æ ‡å‡†       |
| **æ„å»ºå·¥å…·**      | Vite                  | ç§’çº§çƒ­æ›´æ–°ã€é…ç½®ç®€æ´       |
| **ç±»å‹æ£€æŸ¥**      | TypeScript            | ç±»å‹å®‰å…¨ã€å¼€å‘ä½“éªŒå¥½       |
| **åŒ…ç®¡ç†å™¨**      | pnpm                  | å¿«é€Ÿã€ç²¾ç›Šã€ä¸¥æ ¼çš„ä¾èµ–ç®¡ç† |
| **æ ·å¼æ–¹æ¡ˆ**      | åŸç”Ÿ CSS              | å‚è€ƒ Tailwind è®¾è®¡ç³»ç»Ÿ     |
| **Icon åº“**       | Lucide Icons          | ç²¾è‡´ã€å®šåˆ¶ã€500+ å›¾æ ‡åº“    |
| **çŠ¶æ€ç®¡ç†**      | Pinia                 | å®˜æ–¹æ¨èã€API ç®€æ´         |
| **è·¯ç”±ç®¡ç†**      | Vue Router            | å®˜æ–¹æ ‡å‡†ã€çµæ´»é…ç½®         |
| **HTTP å®¢æˆ·ç«¯**   | Axios                 | æ‹¦æˆªå™¨ã€è¯·æ±‚å°è£…           |
| **Markdown ç¼–è¾‘** | marked.js             | å°½å¯èƒ½åŸç”Ÿå®ç°             |
| **è¡¨å•éªŒè¯**      | Vee-Validate          | å¯é€‰ï¼ˆåˆæœŸä¸ä½¿ç”¨ï¼‰         |
| **ä»£ç è´¨é‡**      | ESLint + Prettier     | å¼ºåˆ¶ä»£ç é£æ ¼ã€è‡ªåŠ¨æ ¼å¼åŒ–   |
| **å¼€å‘å·¥å…·**      | Vue DevTools + Vite   | è°ƒè¯•ã€æ€§èƒ½åˆ†æ             |

> è¯¦è§ï¼š`design/æŠ€æœ¯é€‰å‹å’Œè®¾è®¡ç†å¿µ.md`

---

## Phase 2: Markdown ç¼–è¾‘å™¨æ¨¡å—å¼€å‘

**ç›®æ ‡**ï¼šå¼€å‘ç”Ÿäº§çº§å¯å¤ç”¨çš„ WYSIWYG Markdown ç¼–è¾‘å™¨

### 1. åŸºç¡€æ¶æ„

- âœ… ç±»å‹ç³»ç»Ÿï¼ˆInlineFormatTypeã€ParagraphFormatTypeã€BlockInsertTypeï¼‰
- âœ… Selection å·¥å…·å‡½æ•°ã€useSelection Composable
- âœ… useMarkdownEditor ç»Ÿä¸€ API æ¥å£

### 2. Markdown æ ¼å¼åŒ–

- âœ… useMarkdown Composableï¼ˆè¡Œå†…æ ¼å¼ã€æ®µè½æ ¼å¼ã€å—çº§æ’å…¥ï¼‰
- âœ… å…‰æ ‡ä½ç½® bug ä¿®å¤ã€è‡ªåŠ¨æ¢è¡Œä¼˜åŒ–

### 3. UI ç»„ä»¶å±‚

- âœ… EditorContent.vueï¼ˆcontenteditable ç¼–è¾‘åŒºï¼‰
- âœ… EditorToolbar.vueï¼ˆæ ¼å¼åŒ–å·¥å…·æ ï¼‰
- âœ… MarkdownEditor.vueï¼ˆæ•´åˆç»„ä»¶ï¼‰

### 4. å†å²ç®¡ç†

- âœ… useHistory Composableï¼ˆæ’¤é”€/é‡åšã€å¿«æ·é”®æ”¯æŒï¼‰
- âœ… IME è¾“å…¥ä¼˜åŒ–ï¼ˆé˜²æ­¢ä¸­é—´æ€è®°å½•ï¼‰

### 5. Live Preview å®æ—¶æ¸²æŸ“

- âœ… useLivePreview Composableï¼ˆè¡Œç±»å‹æ£€æµ‹ï¼‰
- âœ… CSS é©±åŠ¨çš„æ ·å¼æ¸²æŸ“ï¼ˆæ ‡é¢˜ã€åˆ—è¡¨ã€å¼•ç”¨ã€ä»£ç å—ï¼‰
- âœ… Enter é”®è‡ªåŠ¨å»¶ç»­æ ¼å¼
- âœ… Typora é£æ ¼ç¬¦å·äº¤äº’ï¼ˆæ´»åŠ¨è¡Œæ˜¾ç¤ºã€éæ´»åŠ¨è¡Œéšè—ï¼‰
- âœ… H1 å”¯ä¸€æ€§æ£€æŸ¥è­¦å‘Š

### 6. ç›®å½•å¯¼èˆª

- âœ… useTableOfContents Composable
- âœ… TableOfContents.vue ç»„ä»¶
- âœ… TOC ç‚¹å‡»è·³è½¬ï¼ˆscroll-margin-topï¼‰
- âœ… æ»šåŠ¨é«˜äº®ï¼ˆIntersection Observerï¼‰
- âœ… ç©ºç›®å½•è‡ªåŠ¨éšè—

### 7. ç²˜è´´å¤„ç†

- âœ… çº¯æ–‡æœ¬ç²˜è´´ï¼ˆæ¸…é™¤å¯Œæ–‡æœ¬æ ¼å¼ï¼‰
- â¸ï¸ HTML â†’ Markdown è½¬æ¢ï¼ˆæš‚æœªå®ç°ï¼‰

### 8. å¾…å®ŒæˆåŠŸèƒ½ï¼ˆå·²æš‚åœï¼‰

| åŠŸèƒ½                             | çŠ¶æ€    |
| -------------------------------- | ------- |
| è¡Œå†…æ ¼å¼æ ‡è®°ï¼ˆç²—ä½“ã€æ–œä½“ã€ä»£ç ï¼‰ | â¸ï¸ æš‚åœ |
| è‡ªåŠ¨ä¿å­˜                         | â¸ï¸ æš‚åœ |
| å¿«æ·é”®æ‰©å±•                       | â¸ï¸ æš‚åœ |
| æ€§èƒ½ä¼˜åŒ–                         | â¸ï¸ æš‚åœ |

---

## Phase 3: ç™»å½•åŠŸèƒ½å¼€å‘

**ç›®æ ‡**ï¼šå®ç°å®Œæ•´çš„ç”¨æˆ·ç™»å½•åŠŸèƒ½ï¼ŒåŒ…æ‹¬å‰ç«¯ UI å’Œ API å¯¹æ¥

### 1. å‰ç«¯ UI ç»„ä»¶

- âœ… ç™»å½•é¡µé¢åŸºç¡€å¸ƒå±€ï¼ˆ`LoginView.vue`ï¼‰
- âœ… å“ç‰Œ Logo ç»„ä»¶ï¼ˆ`BrandLogo.vue`ï¼‰
- âœ… è¾“å…¥æ¡†ç»„ä»¶ï¼ˆ`FormInput.vue`ï¼‰
- âœ… å¯†ç å¯è§æ€§åˆ‡æ¢
- âœ… ç™»å½•æŒ‰é’®åŠ è½½çŠ¶æ€åŠ¨ç”»
- âœ… é”™è¯¯æç¤ºæ˜¾ç¤º

### 2. è®¤è¯æ¨¡å— (`modules/auth/`)

- âœ… Token ç®¡ç†å·¥å…·ï¼ˆ`token.ts`ï¼‰
- âœ… Axios å®ä¾‹ + æ‹¦æˆªå™¨ï¼ˆ`api.ts`ï¼‰
- âœ… Pinia Auth Storeï¼ˆ`auth.store.ts`ï¼‰

### 3. API å¯¹æ¥

- âœ… ç™»å½• API è°ƒç”¨ï¼ˆOAuth2 è¡¨å•æ ¼å¼ï¼‰
- âœ… ç™»å½•æˆåŠŸè·³è½¬ï¼ˆ`router.push`ï¼‰
- âœ… 401 é”™è¯¯åŒºåˆ†å¤„ç†ï¼ˆç™»å½•å¤±è´¥ vs Token è¿‡æœŸï¼‰

### 4. è·¯ç”±å®ˆå«

- âœ… å…¨å±€å‰ç½®å®ˆå«ï¼ˆ`beforeEach`ï¼‰
- âœ… è·¯ç”± meta æƒé™æ ‡è®°ï¼ˆ`requiresAuth`ï¼‰
- âœ… æœªç™»å½•é‡å®šå‘åˆ°ç™»å½•é¡µ

### ç›¸å…³æ–‡æ¡£

- [ç™»å½•åŠŸèƒ½ PRD](../1-éœ€æ±‚æ–‡æ¡£/01-ç™»å½•åŠŸèƒ½PRD.md)
- [ç™»å½•åŠŸèƒ½æ¦‚è®¾](../2-è®¾è®¡æ–‡æ¡£/ç™»å½•åŠŸèƒ½/ç™»å½•åŠŸèƒ½æ¦‚è®¾.md)
- [ç™»å½•é¡µé¢ UI è®¾è®¡](../2-è®¾è®¡æ–‡æ¡£/ç™»å½•åŠŸèƒ½/ç™»å½•é¡µé¢UIè®¾è®¡.md)

---

## Phase 4: æ³¨å†ŒåŠŸèƒ½å¼€å‘

**ç›®æ ‡**ï¼šå®ç°å®Œæ•´çš„ç”¨æˆ·æ³¨å†Œæµç¨‹ï¼ŒåŒ…æ‹¬é‚®ç®±éªŒè¯ç ã€å‰ç«¯ UI å’Œåç«¯ API

### 1. åç«¯ API (`app/api/v1/endpoints/auth.py`)

- âœ… å‘é€éªŒè¯ç  APIï¼ˆ`POST /auth/send-code`ï¼‰
- âœ… ç”¨æˆ·æ³¨å†Œ APIï¼ˆ`POST /auth/register`ï¼‰
- âœ… æ³¨å†ŒæˆåŠŸè‡ªåŠ¨ç­¾å‘ JWT Tokenï¼ˆå…äºŒæ¬¡ç™»å½•ï¼‰

### 2. é‚®ä»¶éªŒè¯ç ç³»ç»Ÿ

- âœ… Redis éªŒè¯ç å­˜å‚¨ï¼ˆ`app/db/redis_client.py`ï¼‰
  - `save_verification_code()` - å­˜å‚¨éªŒè¯ç ï¼ˆ5åˆ†é’Ÿè¿‡æœŸï¼‰
  - `verify_code()` - æ ¡éªŒéªŒè¯ç ï¼ˆéªŒè¯æˆåŠŸåè‡ªåŠ¨åˆ é™¤ï¼‰
- âœ… é‚®ä»¶å‘é€æœåŠ¡ï¼ˆ`app/core/email_utils.py`ï¼‰
  - ä½¿ç”¨ `fastapi-mail` + Jinja2 æ¨¡æ¿
  - å¼‚æ­¥åå°å‘é€ï¼ˆ`BackgroundTasks`ï¼‰
- âœ… é‚®ä»¶ HTML æ¨¡æ¿ï¼ˆ`app/templates/email_template.html`ï¼‰
  - å“ç‰Œ Header + éªŒè¯ç çªå‡ºæ˜¾ç¤º + æœ‰æ•ˆæœŸçº¢è‰²è­¦ç¤º
  - åº•éƒ¨æ³¨å†Œé“¾æ¥

### 3. å‰ç«¯æ³¨å†Œé¡µé¢ (`RegisterView.vue`)

- âœ… è¡¨å•å¸ƒå±€ï¼ˆé‚®ç®±ã€å¯†ç ã€ç¡®è®¤å¯†ç ã€éªŒè¯ç ï¼‰
- âœ… å‘é€éªŒè¯ç æŒ‰é’® + 60ç§’å€’è®¡æ—¶
- âœ… å®æ—¶è¡¨å•æ ¡éªŒï¼ˆ`@/utils/validators`ï¼‰
- âœ… å¯†ç å¯è§æ€§åˆ‡æ¢
- âœ… åŠ è½½çŠ¶æ€åŠ¨ç”»
- âœ… é”™è¯¯ä¿¡æ¯æ˜¾ç¤º

### 4. è®¤è¯çŠ¶æ€ç®¡ç† (`auth.store.ts`)

- âœ… `register()` action - è°ƒç”¨æ³¨å†Œ API
- âœ… æ³¨å†ŒæˆåŠŸåè‡ªåŠ¨ä¿å­˜ token + user ä¿¡æ¯
- âœ… æ³¨å†ŒæˆåŠŸè·³è½¬é¦–é¡µ

### 5. Toast é€šçŸ¥ç»„ä»¶

- âœ… `toast.store.ts` - Pinia çŠ¶æ€ç®¡ç†
- âœ… `ToastContainer.vue` - å…¨å±€é€šçŸ¥å®¹å™¨
  - å››ç§ç±»å‹ï¼šsuccess/error/warning/info
  - `TransitionGroup` åˆ—è¡¨åŠ¨ç”»
  - 3ç§’è‡ªåŠ¨æ¶ˆå¤±

### 6. API å°è£… (`auth.api.ts`)

- âœ… `registerApi()` - æ³¨å†Œæ¥å£
- âœ… `sendCodeApi()` - å‘é€éªŒè¯ç æ¥å£
- âœ… ç»Ÿä¸€ `AuthResponse` ç±»å‹å®šä¹‰

### ç›¸å…³æ–‡ä»¶æ¸…å•

| å±‚çº§ | æ–‡ä»¶è·¯å¾„ |
|-----|---------|
| åç«¯ API | `app/api/v1/endpoints/auth.py` |
| åç«¯ Schema | `app/schemas/user.py` |
| åç«¯ CRUD | `app/crud/user.py` |
| Redis å·¥å…· | `app/db/redis_client.py` |
| é‚®ä»¶æœåŠ¡ | `app/core/email_utils.py` |
| é‚®ä»¶æ¨¡æ¿ | `app/templates/email_template.html` |
| å‰ç«¯é¡µé¢ | `frontend/src/views/RegisterView.vue` |
| å‰ç«¯ Store | `frontend/src/stores/auth.store.ts` |
| å‰ç«¯ Store | `frontend/src/stores/toast.store.ts` |
| å‰ç«¯ç»„ä»¶ | `frontend/src/components/ToastContainer.vue` |
| å‰ç«¯ API | `frontend/src/api/auth.api.ts` |
| è¡¨å•éªŒè¯ | `frontend/src/utils/validators.ts` |

---

# ğŸ“ Next: å¾…å®šï¼ˆæ–‡ç« ç®¡ç† / ä¸ªäººä¸»é¡µ / å…¶ä»–ï¼‰
